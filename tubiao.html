<!DOCTYPE html>
<html>
  <head>
    <title>Line Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <canvas id="lineChart"></canvas>

    <script>
      // 解析数据
      const data = [
        {
          ticker: "000001",
          category: "1",
          finance_data:
            '[{"date": "2023-03-31", "value": "14602000000"}, {"date": "2022-12-31", "value": "45516000000"}, {"date": "2022-09-30", "value": "36659000000"}, {"date": "2022-06-30", "value": "22088000000"}, {"date": "2022-03-31", "value": "12850000000"}, {"date": "2021-12-31", "value": "36336000000"}, {"date": "2021-09-30", "value": "29135000000"}, {"date": "2021-06-30", "value": "17583000000"}, {"date": "2021-03-31", "value": "10132000000"}, {"date": "2020-12-31", "value": "28928000000"}, {"date": "2020-09-30", "value": "22398000000"}, {"date": "2020-06-30", "value": "13678000000"}, {"date": "2020-03-31", "value": "8548001000"}, {"date": "2019-12-31", "value": "28195000000"}, {"date": "2019-09-30", "value": "23621000000"}, {"date": "2019-06-30", "value": "15403000000"}, {"date": "2019-03-31", "value": "7446000000"}]',
        },
        {
          ticker: "000001",
          category: "2",
          finance_data:
            '[{"date": "2023-03-31", "value": "45098000000"}, {"date": "2022-12-31", "value": "1.79895E+11"}, {"date": "2022-09-30", "value": "1.38265E+11"}, {"date": "2022-06-30", "value": "92022000000"}, {"date": "2022-03-31", "value": "46207000000"}, {"date": "2021-12-31", "value": "1.69383E+11"}, {"date": "2021-09-30", "value": "1.2719E+11"}, {"date": "2021-06-30", "value": "84680000000"}, {"date": "2021-03-31", "value": "41788000000"}, {"date": "2020-12-31", "value": "1.53542E+11"}, {"date": "2020-09-30", "value": "1.16564E+11"}, {"date": "2020-06-30", "value": "78328000000"}, {"date": "2020-03-31", "value": "37926000000"}, {"date": "2019-12-31", "value": "1.37958E+11"}, {"date": "2019-09-30", "value": "1.02958E+11"}, {"date": "2019-06-30", "value": "67829000000"}, {"date": "2019-03-31", "value": "32476000000"}]',
        },
        {
          ticker: "000001",
          category: "3",
          finance_data:
            '[{"date": "2023-03-31", "value": "26729000000"}, {"date": "2022-12-31", "value": "1.2242E+11"}, {"date": "2022-09-30", "value": "91970000000"}, {"date": "2022-06-30", "value": "64061000000"}, {"date": "2022-03-31", "value": "29867000000"}, {"date": "2021-12-31", "value": "1.23398E+11"}, {"date": "2021-09-30", "value": "90361000000"}, {"date": "2021-06-30", "value": "62265000000"}, {"date": "2021-03-31", "value": "28859000000"}, {"date": "2020-12-31", "value": "1.16633E+11"}, {"date": "2020-09-30", "value": "87641000000"}, {"date": "2020-06-30", "value": "60669000000"}, {"date": "2020-03-31", "value": "26928000000"}, {"date": "2019-12-31", "value": "1.01669E+11"}, {"date": "2019-09-30", "value": "72245000000"}, {"date": "2019-06-30", "value": "47792000000"}, {"date": "2019-03-31", "value": "22809000000"}]',
        },
      ];

      // 提取日期和值
      const dates = {};
      const values = {};

      data.forEach((item) => {
        const category = item.category;
        const financeData = JSON.parse(item.finance_data);

        dates[category] = financeData.map((entry) => entry.date);
        values[category] = financeData.map((entry) => entry.value);
      });

      // 创建图表配置
      const chartConfig = {
        type: "line",
        data: {
          labels: dates["1"], // 使用第一个数据项的日期作为标签
          datasets: Object.keys(dates).map((category, index) => ({
            label: `Category ${category}`,
            data: values[category], // 使用对应数据项的值
            borderColor: `rgb(${Math.random() * 255}, ${Math.random() * 255}, ${
              Math.random() * 255
            })`, // 随机生成边框颜色
            fill: false,
          })),
        },
        options: {
          responsive: true,
          scales: {
            x: {
              display: true,
              title: {
                display: true,
                text: "Date",
              },
            },
            y: {
              display: true,
              title: {
                display: true,
                text: "Value",
              },
            },
          },
        },
      };

      // 创建图表
      const lineChart = new Chart(
        document.getElementById("lineChart"),
        chartConfig
      );
    </script>
  </body>
</html>
